1. Clone the repository
2. Install go 1.11 or later with Go modules enabled
3. Install binaries to $GOPATH/bin

    go install github.com/drone/drone/cmd/drone-agent
    go install github.com/drone/drone/cmd/drone-controller
    go install github.com/drone/drone/cmd/drone-server

4. Start the server at localhost:8080

    export DRONE_GITHUB_CLIENT_ID=...
    export DRONE_GITHUB_CLIENT_SECRET=...
    drone-server



export CGO_CFLAGS="-Wno-return-local-addr

export DRONE_GITHUB_CLIENT_ID=clientID
export DRONE_GITHUB_CLIENT_SECRET=secret



DRONE_PATCH_VERSION=$((DRONE_PATCH_VERSION+1))
go build -a -ldflags "-linkmode external -extldflags '-static' -s -w" -o drone-server .
upx drone-server
podman build -t quay.io/bakito/drone:1.10.1-p${DRONE_PATCH_VERSION} -f ../../docker/Dockerfile-patch .
# podman run --rm -e   DRONE_GITHUB_CLIENT_ID=clientID -e DRONE_GITHUB_CLIENT_SECRET=secret quay.io/bakito/drone:1.10.1-p${DRONE_PATCH_VERSION}
podman push quay.io/bakito/drone:1.10.1-p${DRONE_PATCH_VERSION}
echo "DRONE_PATCH_VERSION ${DRONE_PATCH_VERSION}"

